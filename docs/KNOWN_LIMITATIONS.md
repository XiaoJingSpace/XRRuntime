# 已知限制和待完善功能

本文档列出了项目的已知限制、待完善功能和代码中的 TODO 标记。

## 代码中的 TODO

### 1. 控制器状态同步

**位置**: `src/main/cpp/qualcomm/xr2_platform.cpp:1507`

**当前状态**:
- 实现了基本的控制器连接状态检查
- 使用简化实现，仅验证控制器句柄有效性
- 控制器输入状态（按钮、摇杆、触发器）未实际从 QVR API 读取

**待完善**:
- 实现完整的 QVR API 控制器状态读取
- 需要 QVR SDK 的控制器状态结构定义
- 状态结构可能因 QVR SDK 版本而异

**影响**:
- 控制器输入功能可能不完整
- 需要在实际设备上测试和验证

**相关代码**:
```cpp
// TODO: Read actual controller state from QVR API when available
// The controller state structure depends on QVR SDK version
// For now, state remains unchanged (will be updated when API is integrated)
```

## 占位实现

### 1. Snapdragon Spaces SDK 包装器

**位置**: `src/main/cpp/qualcomm/spaces_sdk_wrapper.cpp`

**当前状态**:
- 提供了完整的 API 框架
- 包含初始化和关闭函数
- 包含手部追踪和场景理解接口
- 但所有函数都是占位实现，未实际调用 SDK

**待完善**:
- 需要实际的 Snapdragon Spaces SDK 集成
- 需要加载 Spaces SDK 库
- 需要实现实际的手部追踪和场景理解功能

**影响**:
- 手部追踪功能不可用
- 场景理解功能不可用
- 需要 Snapdragon Spaces SDK 的完整集成

## 功能限制

### 1. 相机支持

**状态**: ⏳ 待实现

**说明**:
- 深度相机支持未实现
- RGB 相机支持未实现
- 相机 API 集成框架已准备，但未实际实现

**影响**:
- AR 功能受限
- 需要相机数据的功能不可用

### 2. 错误恢复机制

**状态**: ⏳ 部分实现

**说明**:
- 基本的错误处理已实现
- 完整的错误恢复机制需要更多测试
- 某些错误场景的恢复流程需要完善

**影响**:
- 某些错误情况下可能需要重启应用
- 需要在实际设备上进行完整的错误恢复测试

### 3. 性能优化

**状态**: ⏳ 框架已实现，需要调优

**说明**:
- 性能优化框架已完整实现
- 需要在实际硬件上进行性能基准测试
- 需要根据实际性能数据调整优化策略

**影响**:
- 性能可能未达到最优
- 需要实际设备测试和调优

## 平台特定限制

### 1. QVR SDK 版本依赖

**说明**:
- QVR API 结构可能因 SDK 版本而异
- 控制器状态结构需要根据实际 SDK 版本调整
- 某些 API 可能在不同版本中有差异

**建议**:
- 在实际集成时，根据使用的 QVR SDK 版本调整代码
- 添加版本检查和兼容性处理

### 2. 硬件要求

**说明**:
- 需要高通 XR2 硬件设备
- 需要设备上存在 `libqvrservice_client.qti.so` 库
- 某些功能需要特定的硬件支持（如眼动追踪）

## 测试状态

### 1. 编译测试

**状态**: ✅ 通过

**说明**:
- 代码已通过编译检查
- 所有语法错误已修复
- 所有依赖已正确配置

### 2. 功能测试

**状态**: ⏳ 待测试

**说明**:
- 需要在实际 XR2 设备上进行功能测试
- 需要验证所有 API 的正确性
- 需要测试各种使用场景

### 3. 性能测试

**状态**: ⏳ 待测试

**说明**:
- 需要性能基准测试
- 需要帧率、延迟、功耗测试
- 需要优化验证

## 文档更新

本文档会随着项目进展持续更新。如果发现新的限制或待完善功能，请更新此文档。

## 相关文档

- [API 参考](API_REFERENCE.md) - API 实现状态
- [QVR 集成指南](QVR_INTEGRATION.md) - QVR API 集成说明
- [项目指南](PROJECT_GUIDE.md) - 项目完整说明

