# OpenXR Runtime for Qualcomm XR2 - 项目完整说明

> **注意**: 这是项目说明文档的中文版本。完整的技术文档请查看 [docs/PROJECT_GUIDE.md](docs/PROJECT_GUIDE.md)

## 📋 项目简介

本项目是一个完全符合 **OpenXR 1.1** 规范的自定义 XR Runtime，专为 **高通 XR2** 平台设计，运行在 **Android 12** 系统上。

### 核心特性

- ✅ **完整的 OpenXR 1.1 API 实现**
- ✅ **深度集成高通 QVR API**（Snapdragon XR SDK 4.0.5）
- ✅ **支持 VR 和 AR 应用**
- ✅ **6DOF 头部追踪**
- ✅ **双目显示支持**
- ✅ **高性能渲染**

## 🏗️ 项目架构

```
OpenXR 应用层
    ↓
OpenXR Runtime (SO库)
    ├── OpenXR API 实现层
    ├── 平台抽象层
    └── 高通 XR2 平台层 (QVR API)
```

### 主要组件

1. **OpenXR API 层** - 实现所有 OpenXR 1.1 核心函数
2. **平台抽象层** - Android 平台集成和抽象
3. **XR2 平台层** - 高通 QVR API 集成

## 📁 项目结构

```
XRRuntimeStudy/
├── src/main/cpp/
│   ├── openxr/          # OpenXR API 实现
│   ├── platform/        # 平台抽象层
│   ├── qualcomm/        # QVR API 集成
│   ├── utils/           # 工具类
│   └── jni/             # JNI 桥接
├── scripts/              # 构建和部署脚本
└── docs/                # 完整文档
```

## 🚀 快速开始

### 1. 环境要求

- Android SDK Platform 31+
- Android NDK r25+
- CMake 3.22.1+
- Snapdragon XR SDK 4.0.5（已包含）

### 2. 编译

```bash
# 使用 Gradle
./gradlew assembleDebug

# 或使用脚本
./scripts/build.sh debug
```

### 3. 部署

```bash
# 使用部署脚本
./scripts/deploy.sh

# 或手动安装
adb install -r app/build/outputs/apk/debug/app-debug.apk
```

### 4. 调试

```bash
# 查看日志
./scripts/debug.sh logcat

# GDB 调试
./scripts/debug.sh gdb
```

## 📚 文档导航

### 推荐阅读顺序

1. **[完整项目指南](docs/PROJECT_GUIDE.md)** ⭐ - 从这里开始
2. [文档目录](docs/README.md) - 所有文档索引
3. [构建指南](docs/BUILD.md) - 如何编译
4. [部署指南](docs/DEPLOY.md) - 如何部署
5. [QVR 集成指南](docs/QVR_INTEGRATION.md) - QVR API 详解

### 完整文档列表

- [完整项目指南](docs/PROJECT_GUIDE.md) - 项目完整说明（19KB）
- [架构文档](docs/ARCHITECTURE.md) - 架构设计详解（6KB）
- [构建指南](docs/BUILD.md) - 编译步骤（4KB）
- [部署指南](docs/DEPLOY.md) - 部署方法（5KB）
- [调试指南](docs/DEBUG.md) - 调试技巧（7KB）
- [API 参考](docs/API_REFERENCE.md) - API 实现状态（5KB）
- [QVR 集成指南](docs/QVR_INTEGRATION.md) - QVR API 集成（6KB）

## ✨ 已实现功能

### OpenXR API

- ✅ Instance 管理
- ✅ Session 管理
- ✅ Frame 循环
- ✅ Space 追踪
- ✅ Swapchain 管理
- ✅ Input 系统
- ✅ Event 系统

### QVR API 集成

- ✅ QVR Service Client 封装
- ✅ VR Mode 管理
- ✅ 6DOF 头部追踪
- ✅ 显示中断配置
- ✅ 数据转换（QVR ↔ OpenXR）

## 🔧 技术栈

- **语言**: C++17, Java 8+
- **构建**: CMake 3.22+, Gradle 8.0+
- **平台**: Android 12 (API 31)
- **硬件**: 高通 XR2
- **图形**: OpenGL ES 3.0+
- **SDK**: OpenXR 1.1, Snapdragon XR SDK 4.0.5

## 📖 使用示例

### 基本 OpenXR 使用流程

```cpp
// 1. 创建 Instance
XrInstance instance;
xrCreateInstance(&createInfo, &instance);

// 2. 获取 System
XrSystemId systemId;
xrGetSystem(instance, &systemInfo, &systemId);

// 3. 创建 Session
XrSession session;
xrCreateSession(instance, &sessionInfo, &session);

// 4. 开始 Session
xrBeginSession(session, &beginInfo);

// 5. 渲染循环
while (running) {
    xrWaitFrame(session, &waitInfo, &frameState);
    xrBeginFrame(session, &beginInfo);
    // 渲染...
    xrEndFrame(session, &endInfo);
}
```

详细示例请查看 [完整项目指南](docs/PROJECT_GUIDE.md)。

## 🐛 常见问题

### Q: Gradle 同步失败？
A: 检查 `local.properties` 中的 SDK 路径，参考 [SETUP.md](SETUP.md)

### Q: 找不到 QVR 头文件？
A: 确认 Snapdragon XR SDK 路径正确，参考 [构建指南](docs/BUILD.md)

### Q: 追踪数据无效？
A: 检查相机权限，确认 VR Mode 已启动，参考 [调试指南](docs/DEBUG.md)

更多问题请查看 [完整项目指南 - 故障排除](docs/PROJECT_GUIDE.md#故障排除)

## 📝 开发状态

- ✅ **核心功能**: 已完成
- ✅ **QVR 集成**: 已完成
- ⏳ **性能优化**: 进行中
- ⏳ **错误恢复**: 待完善

## 📄 许可证

本项目仅供学习和研究使用。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

---

**完整文档**: [docs/PROJECT_GUIDE.md](docs/PROJECT_GUIDE.md)

**最后更新**: 2024年12月

